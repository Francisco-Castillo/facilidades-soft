<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

  <body>

    <ui:composition template="./../plantilla/plantilla.xhtml">

      <ui:define name="content">
        <div class="heading">
           <h2>Listado de Usuarios</h2>
        </div>
        <h:form>
         
          <p:button value="Nuevo" icon="pi pi-plus" outcome="/pages/nuevousuario"/>
          <p:dataTable value="#{usuarioDataController.lstUsuarios}" var="u"
                       rowKey="#{u.id.id}"
                       emptyMessage="No hay registros"
                       reflow="true">
            <p:column style="width:16px">
              <p:rowToggler />
            </p:column>
          
            <p:column headerText="Apellido y Nombre">
              <h:outputText value="#{u.personas.apellidoNombre}"/>
            </p:column>
            <p:column headerText="Username">
              <h:outputText value="#{c.personas.ndocumento}"/>
            </p:column>
            <p:column headerText="F. de alta">
              <h:outputText value="#{u.falta}">
                <f:convertDateTime pattern="dd/MM/yyyy"/>
              </h:outputText>
            </p:column>
            <p:column headerText="Estado">
              <h:outputText value="#{u.estado}"/>
            </p:column>
            <p:column headerText="Rol">
              <h:outputText value=" + #{u.idtipousuario.descripcion}"/>
            </p:column>
            <p:column>
              <p:splitButton icon="pi pi-list" title="Opciones">
                <p:menuitem value="Actualizar"  icon="pi pi-refresh" />
                <p:menuitem value="Eliminar" ajax="false" icon="pi pi-times" />
              </p:splitButton>  
            </p:column>
            <p:rowExpansion>
              <p:panelGrid  columns="2" columnClasses="label,value" style="width:300px">


                <h:outputText value="Id:" />
                <h:outputText value="#{c.codigo}" />

              </p:panelGrid>
            </p:rowExpansion>
            <f:facet name="footer">
              Total de clientes : #{clienteDataController.lstClientes.size()}
            </f:facet>
          </p:dataTable>
        </h:form>
      </ui:define>

    </ui:composition>

  </body>
</html>
